<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Toko Buku - Daftar Buku</title>
    <meta charset="UTF-8"/>
</head>
<body>
<h1>Daftar Buku</h1>

<table border="1" cellpadding="8" cellspacing="0">
    <thead>
        <tr>
            <th>Judul</th>
            <th>Author</th>
            <th>Harga</th>
            <th>Stok</th>
            <th>Kategori</th>
            <th>Aksi</th>
        </tr>
    </thead>
    <tbody>
    <tr th:each="book : ${books}">
        <td th:text="${book.title}">Judul Buku</td>
        <td th:text="${book.author}">Penulis</td>
        <td th:text="${#numbers.formatDecimal(book.price, 1, 'POINT', 2, 'NONE')}">0.00</td>
        <td th:text="${book.stock}">0</td>
        <td th:text="${book.category != null ? book.category.name : '-'}">Kategori</td>
        <td>
            <a th:href="@{'/books/edit/' + ${book.id}}">Edit</a> |
            <a th:href="@{'/books/delete/' + ${book.id}}" onclick="return confirm('Hapus buku ini?')">Hapus</a>
        </td>
    </tr>
    </tbody>
</table>

<h2 th:text="${bookForm.id != null ? 'Edit Buku' : 'Tambah Buku'}">Tambah Buku</h2>

<form th:action="@{/books/save}" th:object="${bookForm}" method="post">
    <input type="hidden" th:field="*{id}"/>
    <label>Judul:</label>
    <input type="text" th:field="*{title}" required/><br/>

    <label>Author:</label>
    <input type="text" th:field="*{author}" required/><br/>

    <label>Harga:</label>
    <input type="number" step="0.01" th:field="*{price}" required/><br/>

    <label>Stok:</label>
    <input type="number" th:field="*{stock}" required/><br/>

    <label>Deskripsi:</label><br/>
    <textarea th:field="*{description}" rows="3"></textarea><br/>

    <label>URL Gambar:</label>
    <input type="text" th:field="*{imageUrl}" /><br/>

    <label>Kategori:</label>
    <select th:field="*{category}" >
        <option th:each="cat : ${categories}" th:value="${cat}" th:text="${cat.name}">Kategori</option>
    </select><br/><br/>

    <button type="submit">Simpan</button>
</form>

</body>
</html>
